<!Doctype html>
<head>
  <meta charset="utf-8">
  <meta name="keywords" content="HTML,CSS,JavaScript,THREE.js">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css?v=5">
  <title>The Advance Community</title>
</head>
<body>
    <button id="generate" style="position:absolute;">Save as SVG</button>
  <div id="sidebar">
    <h3>Visualization Controls</h3>
    <!-- button to toggle layout -->
    <button onclick="toggleTimeline()" id="toggleTimelineButton">Show timeline</button>
    <button onclick="togglePubs()" id="togglePubsButton">Hide publications</button>
    <button onclick="playPause()" id="playPauseButton">Play animation</button>
    <button onclick="playPauseIdle()" id="idleButton">Highlight Modules</button>
    <button onclick="reScale()" id="reScaleButton">Scale By degree</button>
    <hr/>

    <!-- slider for years -->
    <h3>Selected Year</h3>
    <p id="yearLabel">2008</p>
    <input type="range" min="2000" max="2022" value="2022" step="1" class="slider" id="yearSlider" onchange="yearSlider(this.value)" onenter="yearSlider(this.value)">
    <hr/>

    <h3>Color Scheme</h3>
    <!-- recolor dropdown -->
    <select id="colorDropdown" class="dropdown" onchange="reColor(this.value)">
      <option value="type">Node Type</option>
      <option value="gender">Author Gender</option>
      <option value="race">Author Race</option>
      <option value="discipline">Discipline</option>
      <option value="race_ethnicity">Race & Ethnicity</option>
      <option value="gender_only">Gender Only</option>
      <option value="intersectional">Intersectional</option>
      <option value="expert">DEI Expertise</option>
      <option value="msi">Minority Serving Institutions</option>
      <option value="msi_detail">Hispanic Serving Institutions</option>
      <option value="date">Year</option>
    </select>
    <ul id="legend"></ul>
  </div>
  <div id="container"></div>
  <div id="searchPanel">
    <h3>Selected Node</h3>
    <div id="infoText"></div>
    <hr>
    <!-- Search Bar and result list -->
    <h3>Author Search</h3>
    <input onchange="searchFor(this.value)"></input>
    <ul id="searchResults"></ul>
  </div>


  <script type="text/javascript"  src="js/d3.min.js"></script>
  <script type="text/javascript"  src="js/viz-temp.js?v=7"></script>
  <script type="text/javascript"  src="js/blob.js"></script>
  <script type="text/javascript"  src="js/fileSaver.js"></script>
  <script>
  //----------------svg export code

  d3.select("#generate")
  .on("click", writeDownloadLink);

  function writeDownloadLink(){
    try {
      var isFileSaverSupported = !!new Blob();
    } catch (e) {
      alert("blob not supported");
    }

    var html = d3.select("svg")
    .attr("title", "test2")
    .attr("version", 1.1)
    .attr("xmlns", "http://www.w3.org/2000/svg")
    .node().parentNode.innerHTML;

    var blob = new Blob([html], {type: "image/svg+xml"});
    saveAs(blob, "viz.svg");
  };
  </script>
</body>
</html>
